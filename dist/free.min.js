!function(){var n={title:'<div class="free-confirm-title"><i class="icon"></i></div>',content:'<div class="free-confirm-content" />',buttons:'<div class="free-confirm-btns"><button class="free-confirm-cancel">取消</button><button class="free-confirm-ok">确定</button></div>'},e={title:"提示",content:"您确定这样做吗？",ok:null,cancel:null};$.extend(!0,window,{free:{confirm:function(t){var o=$.extend({},e,t),a=$(n.buttons),i=free.dialog({title:$(n.title).append(o.title),content:$(n.content).append(o.content),footer:a,escClose:!1,blankClose:!1,containerClass:"free-confirm-box",onCloseBtnClick:function(){"function"==typeof o.cancel&&o.cancel()}});"function"==typeof o.ok&&a.find("button.free-confirm-ok").one("click",function(){i.close(),o.ok()}),"function"==typeof o.cancel&&a.find("button.free-confirm-cancel").one("click",function(){i.close(),o.cancel()})}}})}(),function(){function n(){i=$(d.wrapper),s=$(d.container),c=$(d.close),r=$(d.header).html(u.title),l=$(d.content).html(u.content),f=$(d.footer),l.css("max-height",$(window).height()-200),s.append(c).append(r).append(l).appendTo(i),u.footer&&s.append(f.append(u.footer)),i.appendTo("body"),u.containerClass&&s.addClass(u.containerClass),t()}function e(n){27===n.which&&a()}function t(){c.on("click",function(){"function"==typeof u.onCloseBtnClick&&u.onCloseBtnClick(),a()}),u.escClose&&$("body").on("keydown",e),u.blankClose&&i.on("click",function(n){$(n.target).is(".free-dialog-wrapper")&&a()})}function o(){u.escClose&&$("body").off("keydown",e)}function a(){"function"==typeof u.onClose&&u.onClose(),o(),i.remove()}var i,s,c,r,l,f,p={title:"",content:"",footer:"",blankClose:!1,escClose:!0,onClose:null,onCloseBtnClick:null,containerClass:""},d={wrapper:'<div class="free-dialog-wrapper v-center free-modal" />',container:'<div class="free-dialog-container" />',close:'<button class="free-dialog-close"><span class="close-x"></span></button>',header:'<div class="free-dialog-header" />',content:'<div class="free-dialog-content" />',footer:'<div class="free-dialog-footer" />'},u={};$.extend(!0,window,{free:{dialog:function(e){return u=$.extend({},p,e),n(),i.show(),i.close=a,i}}})}(),function(){function n(n,e){var t=n.offset(),o=n.outerWidth();n.outerHeight();return{top:t.top-(e.outerHeight()+a),left:t.left-(e.outerWidth()-o)/2}}function e(n,e){var t=n.offset(),o=n.outerWidth(),i=n.outerHeight();return{top:t.top-(e.outerHeight()-i)/2,left:t.left+o+a}}function t(n,e){var t=n.offset(),o=(n.outerWidth(),n.outerHeight());return{top:t.top-(e.outerHeight()-o)/2,left:t.left-e.outerWidth()-a}}function o(n,e){var t=n.offset(),o=n.outerWidth(),i=n.outerHeight();return{top:t.top+i+a,left:t.left-(e.outerWidth()-o)/2}}var a=8,i={warpper:'<div class="free-popbox-wrapper"/>',container:'<div class="free-popbox-box"/>',content:'<div class="free-popbox-content"/>',anchor:'<div class="free-popbox-anchor"/>'},s={position:"top",content:"",onClose:null},c={top:n,right:e,left:t,bottom:o},c={top:n,right:e,left:t,bottom:o};$.fn.popbox=function(n){function e(n){$(n.target).parents(".free-popbox-wrapper").length||t()}function t(){"function"==typeof o.onClose&&o.onClose(),r.remove(),$("body").off("click",e)}$(".free-popbox-wrapper").remove();var o=$.extend({},s,n),a=$(this),r=$(i.warpper),l=$(i.container),f=$(i.content),p=$(i.anchor);return l.append(f.html(o.content)).append(p),r.append(l).appendTo("body"),l.css(c[o.position](a,f)),f.addClass(o.position),p.addClass(o.position),setTimeout(function(){$("body").on("click",e)},0),{close:t,repin:function(){l.css(c[o.position](a,f))}}}}(),function(n){function e(n,e){for(var t,o,a=[],i=0,s=0,c=e.length;s<c;s++)(o=(t=e[s]).width)?a.push('<th width="'+o+'px">'+t.name+"</th>"):a.push("<th>"+t.name+"</th>"),i+=o||100;return n.$tableBox.css("width",i+"px"),n.$infoBox.css("width",i+"px"),a.join("")}function t(e,t){for(var o,a,i=n("<tr></tr>"),s=0,c=e.length;s<c;s++){if(o=e[s].key,a=n('<td x-index="'+s+'"></td>'),n.isFunction(o)){var r=o(t)+"";r.startsWith("<td")&&r.endsWith("</td>")?a=n(r):a.text(r)}else"string"==typeof o&&a.text(t[o]);i.append(a)}return i}function o(n,e){for(var o=[],a=0,i=e.length;a<i;a++)o.push(t(n,e[a]));return o}function a(n,e){n.$pageBox.twbsPagination("destroy"),n.$pageBox.twbsPagination({totalPages:Math.ceil(e/r),visiblePages:7,hideOnlyOnePage:!0,initiateStartPageClick:!1,onPageClick:function(e,t){s(n,!1,t-1)}}).show()}function i(e,t){var a=e.$tableBox.find("tbody");a.empty(),t.length>0?(a.append(o(e.columns,t)),a.find("tr").each(function(e){n(this).data("item",t[e])})):e.$pageBox.hide()}function s(n,e,t){var o=n.url,s=n.params,l=n.prepare,f=n.pagination;s=s||{},t=t||0,s.page=t,free.doGet(o,s,function(o){l&&(o=l(o));var s,p;Array.isArray(o)?(s=o.length,p=o):(s=o.total,p=o.items),i(n,p),c(n,t+1,Math.ceil(s/r),s),!f||s<=r?n.$pageBox.hide():e&&a(n,s),n.onLoad(p)})}function c(n,e,t,o){n.pagination&&(n.$infoBox.find("span.page-num").text(e),n.$infoBox.find("span.page-sum").text(t)),n.$infoBox.find("span.sum").text(o)}var r=30;n.fn.table=function(o){var a=this,r=n('<div class="info-box"><span class="page-info">第&nbsp;<span class="page-num">1</span>&nbsp;页，共&nbsp;<span class="page-sum"></span>&nbsp;页，</span>总共&nbsp;<span class="sum"></span>&nbsp;条数据</div>'),l=n('<div class="table-box"><table><thead></thead><tbody></tbody></table></div>'),f=n('<div class="page-box"></div>'),p={pagination:!1,columns:[],url:"",params:null,data:[],$infoBox:r,$tableBox:l,$pageBox:f,onLoad:function(){}};return n.extend(!0,p,o),o.data&&(p.data=o.data),a.addClass("free-table-container").append(r).append(l),p.pagination?a.append(f):r.find(".page-info").hide(),l.css("min-width",100*p.columns.length+"px"),l.find("thead").append(e(p,p.columns)),p.url?s(p,!0):p.data&&(i(p,p.data),c(p,1,1,p.data.length)),{refresh:function(){s(p,!0)},setColumns:function(t){p.columns=n.extend([],t),l.find("thead").empty().append(e(p,t))},setData:function(n){i(p,n)},insert:function(n,e){var o=l.find("tbody tr:eq("+e+")"),a=t(p.columns,n);0===o.length?l.find("tbody").append(a):o.before(a)},remove:function(n){l.find("tbody tr:eq("+n+")").remove()},setParams:function(n){p.params=n,s(p,!0)}}}}(jQuery),function(){function n(){o=$(s.container).appendTo("body")}function e(e){o||n();var t=$(s.box).addClass(e.type);$(s.icon).addClass(e.type).appendTo(t),$(s.title).text(e.title).appendTo(t),$(s.content).text(e.message).appendTo(t),$(s.close).appendTo(t).on("click",function(){t.remove()}),t.appendTo(o),setTimeout(function(){t.remove()},e.duration)}function t(n,e){var t={title:a[n]||a.info,message:e[0]||"",duration:i,type:n};return 2===e.length&&("number"==typeof e[1]?t.duration=parseInt(e[1]):t.title=e[1]||""),3===e.length&&(t.title=e[1]||"",t.duration=parseInt(e[2])||i),t}var o,a={success:"成功",error:"错误",info:"提示",warn:"警告"},i=4e3,s={container:'<div class="free-noty-container"/>',icon:'<span class="free-noty-icon success"></span>',box:'<div class="free-noty-box"/>',title:'<div class="free-noty-title"/>',content:'<div class="free-noty-content"/>',close:'<span class="free-noty-close"></span>'};$.extend(!0,window,{free:{noty:{success:function(n,o,a){e(t("success",arguments))},info:function(n,o,a){e(t("info",arguments))},error:function(n,o,a){e(t("error",arguments))},warn:function(n,o,a){e(t("warn",arguments))}}}})}();