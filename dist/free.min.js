!function(){var n={title:'<div class="free-confirm-title"><i class="icon"></i></div>',content:'<div class="free-confirm-content" />',buttons:'<div class="free-confirm-btns"><button class="free-confirm-cancel">取消</button><button class="free-confirm-ok">确定</button></div>'},e={title:"提示",content:"您确定这样做吗？",ok:null,cancel:null};$.extend(!0,window,{free:{confirm:function(t){var o=$.extend({},e,t),a=$(n.buttons),i=free.dialog({title:$(n.title).append(o.title),content:$(n.content).append(o.content),footer:a,escClose:!1,blankClose:!1,containerClass:"free-confirm-box",onCloseBtnClick:function(){"function"==typeof o.cancel&&o.cancel()}});"function"==typeof o.ok&&a.find("button.free-confirm-ok").one("click",function(){i.close(),o.ok()}),"function"==typeof o.cancel&&a.find("button.free-confirm-cancel").one("click",function(){i.close(),o.cancel()})}}})}(),function(){function n(){i=$(p.wrapper),s=$(p.container),c=$(p.close),l=$(p.header).html(u.title),r=$(p.content).html(u.content),d=$(p.footer),r.css("max-height",$(window).height()-200),s.append(c).append(l).append(r).appendTo(i),u.footer&&s.append(d.append(u.footer)),i.appendTo("body"),u.containerClass&&s.addClass(u.containerClass),t()}function e(n){27===n.which&&a()}function t(){c.on("click",function(){"function"==typeof u.onCloseBtnClick&&u.onCloseBtnClick(),a()}),u.escClose&&$("body").on("keydown",e),u.blankClose&&i.on("click",function(n){$(n.target).is(".free-dialog-wrapper")&&a()})}function o(){u.escClose&&$("body").off("keydown",e)}function a(){"function"==typeof u.onClose&&u.onClose(),o(),i.remove()}var i,s,c,l,r,d,f={title:"",content:"",footer:"",blankClose:!1,escClose:!0,onClose:null,onCloseBtnClick:null,containerClass:""},p={wrapper:'<div class="free-dialog-wrapper v-center free-modal" />',container:'<div class="free-dialog-container" />',close:'<button class="free-dialog-close"><span class="close-x"></span></button>',header:'<div class="free-dialog-header" />',content:'<div class="free-dialog-content" />',footer:'<div class="free-dialog-footer" />'},u={};$.extend(!0,window,{free:{dialog:function(e){return u=$.extend({},f,e),n(),i.show(),i.close=a,i}}})}(),function(n){function e(n,e){for(var t,o,a=[],i=0,s=0,c=e.length;s<c;s++)(o=(t=e[s]).width)?a.push('<th width="'+o+'px">'+t.name+"</th>"):a.push("<th>"+t.name+"</th>"),i+=o||100;return n.$tableBox.css("width",i+"px"),n.$infoBox.css("width",i+"px"),a.join("")}function t(e,t){for(var o,a,i=n("<tr></tr>"),s=0,c=e.length;s<c;s++){if(o=e[s].key,a=n('<td x-index="'+s+'"></td>'),n.isFunction(o)){var l=o(t)+"";l.startsWith("<td")&&l.endsWith("</td>")?a=n(l):a.text(l)}else"string"==typeof o&&a.text(t[o]);i.append(a)}return i}function o(n,e){for(var o=[],a=0,i=e.length;a<i;a++)o.push(t(n,e[a]));return o}function a(n,e){n.$pageBox.twbsPagination("destroy"),n.$pageBox.twbsPagination({totalPages:Math.ceil(e/l),visiblePages:7,hideOnlyOnePage:!0,initiateStartPageClick:!1,onPageClick:function(e,t){s(n,!1,t-1)}}).show()}function i(e,t){var a=e.$tableBox.find("tbody");a.empty(),t.length>0?(a.append(o(e.columns,t)),a.find("tr").each(function(e){n(this).data("item",t[e])})):e.$pageBox.hide()}function s(n,e,t){var o=n.url,s=n.params,r=n.prepare,d=n.pagination;s=s||{},t=t||0,s.page=t,free.doGet(o,s,function(o){r&&(o=r(o));var s,f;Array.isArray(o)?(s=o.length,f=o):(s=o.total,f=o.items),i(n,f),c(n,t+1,Math.ceil(s/l),s),!d||s<=l?n.$pageBox.hide():e&&a(n,s),n.onLoad(f)})}function c(n,e,t,o){n.pagination&&(n.$infoBox.find("span.page-num").text(e),n.$infoBox.find("span.page-sum").text(t)),n.$infoBox.find("span.sum").text(o)}var l=30;n.fn.table=function(o){var a=this,l=n('<div class="info-box"><span class="page-info">第&nbsp;<span class="page-num">1</span>&nbsp;页，共&nbsp;<span class="page-sum"></span>&nbsp;页，</span>总共&nbsp;<span class="sum"></span>&nbsp;条数据</div>'),r=n('<div class="table-box"><table><thead></thead><tbody></tbody></table></div>'),d=n('<div class="page-box"></div>'),f={pagination:!1,columns:[],url:"",params:null,data:[],$infoBox:l,$tableBox:r,$pageBox:d,onLoad:function(){}};return n.extend(!0,f,o),o.data&&(f.data=o.data),a.addClass("free-table-container").append(l).append(r),f.pagination?a.append(d):l.find(".page-info").hide(),r.css("min-width",100*f.columns.length+"px"),r.find("thead").append(e(f,f.columns)),f.url?s(f,!0):f.data&&(i(f,f.data),c(f,1,1,f.data.length)),{refresh:function(){s(f,!0)},setColumns:function(t){f.columns=n.extend([],t),r.find("thead").empty().append(e(f,t))},setData:function(n){i(f,n)},insert:function(n,e){var o=r.find("tbody tr:eq("+e+")"),a=t(f.columns,n);0===o.length?r.find("tbody").append(a):o.before(a)},remove:function(n){r.find("tbody tr:eq("+n+")").remove()},setParams:function(n){f.params=n,s(f,!0)}}}}(jQuery),function(){function n(){o=$(s.container).appendTo("body")}function e(e){o||n();var t=$(s.box).addClass(e.type);$(s.icon).addClass(e.type).appendTo(t),$(s.title).text(e.title).appendTo(t),$(s.content).text(e.message).appendTo(t),$(s.close).appendTo(t).on("click",function(){t.remove()}),t.appendTo(o),setTimeout(function(){t.remove()},e.duration)}function t(n,e){var t={title:a[n]||a.info,message:e[0]||"",duration:i,type:n};return 2===e.length&&("number"==typeof e[1]?t.duration=parseInt(e[1]):t.title=e[1]||""),3===e.length&&(t.title=e[1]||"",t.duration=parseInt(e[2])||i),t}var o,a={success:"成功",error:"错误",info:"提示",warn:"警告"},i=4e3,s={container:'<div class="free-noty-container"/>',icon:'<span class="free-noty-icon success"></span>',box:'<div class="free-noty-box"/>',title:'<div class="free-noty-title"/>',content:'<div class="free-noty-content"/>',close:'<span class="free-noty-close"></span>'};$.extend(!0,window,{free:{noty:{success:function(n,o,a){e(t("success",arguments))},info:function(n,o,a){e(t("info",arguments))},error:function(n,o,a){e(t("error",arguments))},warn:function(n,o,a){e(t("warn",arguments))}}}})}();