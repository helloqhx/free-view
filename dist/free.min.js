!function(){var e={content:'<div class="free-alert-content" />',buttons:'<div class="free-alert-btns"><button class="free-alert-ok">确定</button></div>'};$.extend(!0,window,{free:{alert:function(t){var n=$(e.buttons),o=free.dialog({title:'<div class="free-alert-title"><i class="icon"></i>提示</div>',content:$(e.content).append(t||""),footer:n,containerClass:"free-alert-box",escClose:!1,blankClose:!1});n.find("button.free-alert-ok").one("click",function(){o.close()})}}})}(),function(){var e={title:'<div class="free-confirm-title"><i class="icon"></i></div>',content:'<div class="free-confirm-content" />',buttons:'<div class="free-confirm-btns"><button class="free-confirm-cancel">取消</button><button class="free-confirm-ok">确定</button></div>'},t={title:"提示",content:"您确定这样做吗？",ok:null,cancel:null};$.extend(!0,window,{free:{confirm:function(n){var o=$.extend({},t,n),a=$(e.buttons),i=free.dialog({title:$(e.title).append(o.title),content:$(e.content).append(o.content),footer:a,escClose:!1,blankClose:!1,containerClass:"free-confirm-box",onCloseBtnClick:function(){"function"==typeof o.cancel&&o.cancel()}});a.find("button.free-confirm-ok").one("click",function(){i.close(),"function"==typeof o.ok&&o.ok()}),a.find("button.free-confirm-cancel").one("click",function(){i.close(),"function"==typeof o.cancel&&o.cancel()})}}})}(),function(){function e(){i=$(u.wrapper),s=$(u.container),r=$(u.close),c=$(u.header).html(p.title),l=$(u.content).html(p.content),d=$(u.footer),l.css("max-height",$(window).height()-200),s.append(r).append(c).append(l).appendTo(i),p.footer&&s.append(d.append(p.footer)),i.appendTo("body"),p.containerClass&&s.addClass(p.containerClass),n()}function t(e){27===e.which&&a()}function n(){r.on("click",function(){"function"==typeof p.onCloseBtnClick&&p.onCloseBtnClick(),a()}),p.escClose&&$("body").on("keydown",t),p.blankClose&&i.on("click",function(e){$(e.target).is(".free-dialog-wrapper")&&a()})}function o(){p.escClose&&$("body").off("keydown",t)}function a(){"function"==typeof p.onClose&&p.onClose(),o(),i.remove()}var i,s,r,c,l,d,f={title:"",content:"",footer:"",blankClose:!1,escClose:!0,onClose:null,onCloseBtnClick:null,containerClass:""},u={wrapper:'<div class="free-dialog-wrapper v-center free-modal" />',container:'<div class="free-dialog-container" />',close:'<button class="free-dialog-close"><span class="close-x"></span></button>',header:'<div class="free-dialog-header" />',content:'<div class="free-dialog-content" />',footer:'<div class="free-dialog-footer" />'},p={};$.extend(!0,window,{free:{dialog:function(t){return p=$.extend({},f,t),e(),i.show(),i.close=a,i}}})}(),function(){function e(e,t){var n=e.offset(),o=e.outerWidth();e.outerHeight();return{top:n.top-(t.outerHeight()+a),left:n.left-(t.outerWidth()-o)/2}}function t(e,t){var n=e.offset(),o=e.outerWidth(),i=e.outerHeight();return{top:n.top-(t.outerHeight()-i)/2,left:n.left+o+a}}function n(e,t){var n=e.offset(),o=(e.outerWidth(),e.outerHeight());return{top:n.top-(t.outerHeight()-o)/2,left:n.left-t.outerWidth()-a}}function o(e,t){var n=e.offset(),o=e.outerWidth(),i=e.outerHeight();return{top:n.top+i+a,left:n.left-(t.outerWidth()-o)/2}}var a=8,i={warpper:'<div class="free-popbox-wrapper"/>',container:'<div class="free-popbox-box"/>',content:'<div class="free-popbox-content"/>',anchor:'<div class="free-popbox-anchor"/>'},s={position:"top",content:"",onClose:null},r={top:e,right:t,left:n,bottom:o},r={top:e,right:t,left:n,bottom:o};$.fn.popbox=function(e){function t(){"function"==typeof n.onClose&&n.onClose(f),a.remove()}var n=$.extend({},s,e),o=$(this),a=$(i.warpper),c=$(i.container),l=$(i.content),d=$(i.anchor);c.append(l.html(n.content)).append(d),a.append(c).appendTo("body"),c.css(r[n.position](o,l)),l.addClass(n.position),d.addClass(n.position),setTimeout(function(){$("body").one("click",function(e){t()})},0),c.on("click",function(){return!1});var f={close:t,repin:function(){c.css(r[n.position](o,l))}};return"function"==typeof n.onShow&&n.onShow(f),f}}(),function(e){function t(e,t){var n,o,a=[];e.selectable&&a.push('<th class="free-table-selector"><input type="checkbox"/></th>');for(var i,s={},r=0,c=t.length;r<c;r++){if(null==(n=t[r]).id)throw"Each column must have an unique id";s[n.id]=n,n.min_width=n.min_width||e.minWidth,o=n.width||n.min_width,i="",n.hide&&(i+=" hide"),e.enableColumnReorder&&(i+=" movable"),i=i.trim(),a.push('<th class="'+i+'" x-id='+n.id+' width="'+o+'px"><span class="text">'+n.name+"</span>"+(e.enableColumnResize?'<span class="resize-handler"/>':"")+(n.sort?'<span class="sort-handler"/>':"")+"</th>")}return e.colMap=s,a.join("")}function n(t,n,o){var a=[];o.selectable&&a.push('<td class="free-table-selector"><input type="checkbox"/></td>');for(var i,s,r,c,l=0,d=t.length;l<d;l++)(s=t[l]).id,r=s.formatter,text="function"==typeof r?r(n)+"":null==n[s.id]?"":n[s.id]+"",i=s.escape?e("<i/>").text(text).html():text,c=s.hide?"hide":"",s.cssClass&&(c+=" "+s.cssClass),i=c?"<td class="+c+">"+i+"</td>":"<td>"+i+"</td>",a.push(i);return"<tr>"+a.join("")+"</tr>"}function o(e,t,o){for(var a=[],i=0,s=t.length;i<s;i++)a.push(n(e,t[i],o));return a}function a(e,t){e.$pageBox.twbsPagination("destroy"),e.$pageBox.twbsPagination({totalPages:Math.ceil(t/PAGE_SIZE),visiblePages:7,hideOnlyOnePage:!0,initiateStartPageClick:!1,onPageClick:function(t,n){s(e,!1,n-1)}}).show()}function i(t,n){var a=t.$tableBox.find("tbody");a.empty(),n.length>0?(a.append(o(t.columns,n,t)),a.find("tr").each(function(t){e(this).data("item",n[t])})):t.$pageBox.hide(),u(t.$tableBox)}function s(e,t,n){var o=e.url,s=e.params,c=e.prepare,l=e.pagination;s=s||{},n=n||0,s.page=n,free.doGet(o,s,function(o){c&&(o=c(o));var s,d;Array.isArray(o)?(s=o.length,d=o):(s=o.total,d=o.items),f(d),e.data=d,i(e,d),e.info&&r(e,n+1,Math.ceil(s/PAGE_SIZE),s),!l||s<=PAGE_SIZE?e.$pageBox.hide():t&&a(e,s),e.onLoad(d)})}function r(e,t,n,o){e.pagination&&(e.$infoBox.find("span.page-num").text(t),e.$infoBox.find("span.page-sum").text(n)),e.$infoBox.find("span.sum").text(o)}function c(t,n){function o(t,n){for(var o=Math.min(t,n),a=Math.max(t,n),i=f.find("tbody > tr").slice(o,a+1),s=!0,r=0,c=i.length;r<c;r++)if(!e(i[r]).hasClass("selected")){s=!1;break}return{select:!s,rows:i}}function a(e){for(var t=e.next();t.length>0&&t.hasClass("hide");)t=t.next();return t}function i(e){for(var t=e.prev();t.length>0&&(t.hasClass("hide")||t.hasClass("free-table-selector"));)t=t.prev();return t}function s(e,t){var n=i(t),o=a(t),s=f.offset();e.prev=n,e.next=o,e.left=n.length>0?n.offset().left+n.outerWidth()/2-s.left:0,e.right=o.length>0?o.offset().left-s.left:f.outerWidth()}function r(e){var t=f.find("thead").data("reorder-info"),n=t.$th;n.hasClass("moving")||n.addClass("moving");var o=t.offset.left+e.clientX-t.eX-t.tableOffset.left;o<t.leftMost&&(o=t.leftMost),o>t.rightMost&&(o=t.rightMost);var a=t.prev,i=t.next;o<t.left&&a.length>0?(a.before(n.detach()),s(t,n)):o>t.right&&i.length>0&&(i.after(n.detach()),s(t,n)),n.css("left",o)}function c(e){var t=f.find("thead").data("resize-info"),o=t.$th,a=n.colMap[o.attr("x-id")].min_width,i=e.clientX-t.eX,s=t.width+i;s<a&&(s=a),o.width(s),f.width(t.tableWidth+(s-t.width)),n.info&&n.$infoBox.width(t.infoWidth+(s-t.width))}var f=n.$tableBox;n.selectable&&(f.find("th.free-table-selector > input").on("change",function(){var t=e(this).prop("checked");f.find("tbody td.free-table-selector > input").prop("checked",t),t?f.find("tbody tr").addClass("selected"):f.find("tbody tr").removeClass("selected")}),f.on("click","thead .free-table-selector",function(t){e(t.target).is("input")||e(this).find("input").trigger("click")}),f.on("click","tbody .free-table-selector",function(t){var a=e(this),i=e(t.target),s=f.find("th.free-table-selector").data("last-click"),r=a.parent(),c=r.index();if(null!=s&&s!=c&&t.shiftKey){var l=o(s,c);l.select?(e(l.rows).addClass("selected"),e(l.rows).find("input").prop("checked",!0)):(e(l.rows).removeClass("selected"),e(l.rows).find("input").prop("checked",!1))}else if(r.toggleClass("selected"),!i.is("input")){var d=a.find("input");d.prop("checked",!d.prop("checked"))}var u=f.find("tbody tr:not(.selected)");f.find("th.free-table-selector input").prop("checked",0===u.length),"function"==typeof n.onSelectChange&&n.onSelectChange(),f.find("th.free-table-selector").data("last-click",c)})),f.find("thead").on("contextmenu",function(o){o.preventDefault(),e(".free-table-header-menu").remove();var a=e('<div class="free-table-header-menu"></div>');a.appendTo("body");var i=o.pageX,s=o.pageY;a.css({top:s,left:i});for(var r=n.columns,c=[],l=0;l<r.length;l++)c.push('<div class="item" x-id="'+r[l].id+'"><input type="checkbox"'+(r[l].hide?"":"checked")+'/><span class="name">'+r[l].name+"</span></div>");a.append(c.join("")),a.on("click",".item",function(t){if(!e(t.target).is("input")){var n=e(this).find("input");n.prop("checked",!n.prop("checked")).change()}}),a.on("click",function(e){e.stopPropagation()}),e("body").one("click",function(e){a.remove()}),a.on("change",".item > input",function(o){var a=e(this).parent().attr("x-id"),i=t.find("thead th[x-id="+a+"]");n.colMap[a].hide=!e(this).prop("checked");var s=i.index()+1,r=e("tbody > tr > td:nth-child("+s+")");i.toggleClass("hide"),r.toggleClass("hide"),p(f,n)})}),f.on("click","thead > th > .sort-handler",function(){var t=e(this),o=t.parent().attr("x-id");t.hasClass("sort-asc")?(t.removeClass("sort-asc").addClass("sort-desc"),d(n,o,-1)):t.hasClass("sort-desc")?(t.removeClass("sort-desc sort-asc"),d(n,"free-index")):(f.find("thead > th > .sort-handler").removeClass("sort-asc sort-desc"),t.addClass("sort-asc"),d(n,o))}),n.enableColumnReorder&&f.find("thead > th.movable").on("mousedown",function(t){if(!e(t.target).hasClass("sort-handler")&&!e(t.target).hasClass("resize-handler")){t.preventDefault();var o=e(this),a={$th:o,index:o.index(),eX:t.clientX,eY:t.clientY,tableOffset:f.offset(),offset:o.offset(),leftMost:-o.outerWidth(),rightMost:f.outerWidth()+10};s(a,o),o.parent().data("reorder-info",a);var i=b(r);e(document).on("mousemove",i),e(document).one("mouseup",function(t){var o=f.find("thead"),a=o.data("reorder-info"),s=a.$th;a.delta;l(n,a.index-1,s.index()-1),o.data("reorder-info",null),s.removeClass("moving"),e(document).off("mousemove",i)})}}),n.enableColumnResize&&f.on("mousedown","thead > th > .resize-handler",function(t){t.preventDefault();var o=e(this).parent();f.find("thead").data("resize-info",{$th:o,width:o.width(),tableWidth:f.width(),infoWidth:n.$infoBox.width(),eX:t.clientX});var a=b(c);e(document).on("mousemove",a),e(document).one("mouseup",function(t){f.find("thead").data("resize-info",null),e(document).off("mousemove",a)})})}function l(t,n,o){if(n!==o){var a=t.columns,i=a[n];a.splice(n,1),a.splice(o,0,i),t.selectable&&(n+=1,o+=1),t.$tableBox.find("tbody > tr").each(function(t,a){var i=e(a).find("td").detach(),s=i[n];i.splice(n,1),i.splice(o,0,s),e(a).empty().append(i)})}}function d(t,n,o){o=o||1;var a=t.$tableBox.find("tbody > tr").detach();a.sort(function(t,a){var i=e(t).data("item")[n],s=e(a).data("item")[n];if("number"==typeof i&&"number"==typeof s)return o*(i-s);var r=0;return(i+="")<(s+="")?r=-1:i>s&&(r=1),r*o}),t.$tableBox.find("tbody").append(a)}function f(e){for(var t=0,n=e.length;t<n;t++)e[t]["free-index"]=t;return e}function u(e){e.find("th.free-table-selector input").prop("checked",!1),e.find("th > .sort-handler").removeClass("sort-asc sort-desc")}function p(e,t){var n=0,o=t.columns;t.selectable&&(n+=h);for(var a=0,i=o.length;a<i;a++)o[a].hide||(n+=o[a].width||MIN_WIDTH);e.css("width",n),t.info&&t.$infoBox.css("width",n)}var h=35,v={pagination:!1,columns:[],url:"",params:null,data:[],info:!0,minWidth:80,pageSize:30,selectable:!1,enableColumnResize:!1,enableColumnReorder:!1,onLoad:function(){}},b=function(e){var t=Date.now();return function(n){Date.now()-t<100||(e.call(this,n),t=Date.now())}};e.fn.table=function(o){var a=this,l=e('<div class="info-box"><span class="page-info">第&nbsp;<span class="page-num">1</span>&nbsp;页，共&nbsp;<span class="page-sum"></span>&nbsp;页，</span>总共&nbsp;<span class="sum"></span>&nbsp;条数据</div>'),d=e('<div class="table-box"><table><thead></thead><tbody></tbody></table></div>'),h=e('<div class="page-box"></div>'),b=o.data;delete o.data;var m=e.extend(!0,{$infoBox:l,$tableBox:d,$pageBox:h},v,o);return b&&(m.data=b,o.data=b),a.addClass("free-table-container"),m.info&&a.append(l),a.append(d),m.pagination?a.append(h):l.find(".page-info").hide(),p(d,m),d.find("thead").append(t(m,m.columns)),m.url?s(m,!0):m.data&&(i(m,f(m.data)),m.info&&r(m,1,1,m.data.length)),c(a,m),{refresh:function(){s(m,!0)},setColumns:function(n){m.columns=e.extend([],n),d.find("thead").empty().append(t(m,n))},setData:function(e){i(m,e)},insert:function(e,t){var o=d.find("tbody tr:eq("+t+")"),a=n(m.columns,e);0===o.length?d.find("tbody").append(a):o.before(a),u(d)},remove:function(e){d.find("tbody tr:eq("+e+")").remove()},setParams:function(e){m.params=e,s(m,!0)},getSelected:function(){var t=d.find("tr.selected"),n=[];return t.each(function(t,o){n.push(e(o).data("item"))}),{rows:t,items:n}},isSelected:function(e){return d.find("tr:eq("+e+")").hasClass("selected")},clearSelect:function(){d.find("tr.selected").removeClass("selected"),d.find(".free-table-selector input").prop("checked",!1)},destroyHeaderMenu:function(){e(".free-table-header-menu").remove()}}}}(jQuery),function(){function e(){o=$(s.container).appendTo("body")}function t(t){o||e();var n=$(s.box).addClass(t.type);$(s.icon).addClass(t.type).appendTo(n),$(s.title).text(t.title).appendTo(n),$(s.content).text(t.message).appendTo(n),$(s.close).appendTo(n).on("click",function(){n.remove()}),n.appendTo(o),setTimeout(function(){n.remove()},t.duration)}function n(e,t){var n={title:a[e]||a.info,message:t[0]||"",duration:i,type:e};return 2===t.length&&("number"==typeof t[1]?n.duration=parseInt(t[1]):n.title=t[1]||n.title),3===t.length&&(n.title=t[1]||n.title,n.duration=parseInt(t[2])||i),n}var o,a={success:"成功",error:"错误",info:"提示",warn:"警告"},i=4e3,s={container:'<div class="free-noty-container"/>',icon:'<span class="free-noty-icon success"></span>',box:'<div class="free-noty-box"/>',title:'<div class="free-noty-title"/>',content:'<div class="free-noty-content"/>',close:'<span class="free-noty-close"></span>'};$.extend(!0,window,{free:{noty:{success:function(e,o,a){t(n("success",arguments))},info:function(e,o,a){t(n("info",arguments))},error:function(e,o,a){t(n("error",arguments))},warn:function(e,o,a){t(n("warn",arguments))}}}})}();