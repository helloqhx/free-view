!function(){var e={content:'<div class="free-alert-content" />',buttons:'<div class="free-alert-btns"><button class="free-alert-ok">确定</button></div>'};$.extend(!0,window,{free:{alert:function(t){var n=$(e.buttons),o=free.dialog({title:'<div class="free-alert-title"><i class="icon"></i>提示</div>',content:$(e.content).append(t||""),footer:n,containerClass:"free-alert-box",escClose:!1,blankClose:!1});n.find("button.free-alert-ok").one("click",function(){o.close()})}}})}(),function(){var e={title:'<div class="free-confirm-title"><i class="icon"></i></div>',content:'<div class="free-confirm-content" />',buttons:'<div class="free-confirm-btns"><button class="free-confirm-cancel">取消</button><button class="free-confirm-ok">确定</button></div>'},t={title:"提示",content:"您确定这样做吗？",ok:null,cancel:null};$.extend(!0,window,{free:{confirm:function(n){var o=$.extend({},t,n),i=$(e.buttons),a=free.dialog({title:$(e.title).append(o.title),content:$(e.content).append(o.content),footer:i,escClose:!1,blankClose:!1,containerClass:"free-confirm-box",onCloseBtnClick:function(){"function"==typeof o.cancel&&o.cancel()}});i.find("button.free-confirm-ok").one("click",function(){a.close(),"function"==typeof o.ok&&o.ok()}),i.find("button.free-confirm-cancel").one("click",function(){a.close(),"function"==typeof o.cancel&&o.cancel()})}}})}(),function(){function e(){a=$(p.wrapper),c=$(p.container),s=$(p.close),r=$(p.header).html(u.title),l=$(p.content).html(u.content),d=$(p.footer),l.css("max-height",$(window).height()-200),c.append(s).append(r).append(l).appendTo(a),u.footer&&c.append(d.append(u.footer)),a.appendTo("body"),u.containerClass&&c.addClass(u.containerClass),n()}function t(e){27===e.which&&i()}function n(){s.on("click",function(){"function"==typeof u.onCloseBtnClick&&u.onCloseBtnClick(),i()}),u.escClose&&$("body").on("keydown",t),u.blankClose&&a.on("click",function(e){$(e.target).is(".free-dialog-wrapper")&&i()})}function o(){u.escClose&&$("body").off("keydown",t)}function i(){"function"==typeof u.onClose&&u.onClose(),o(),a.remove()}var a,c,s,r,l,d,f={title:"",content:"",footer:"",blankClose:!1,escClose:!0,onClose:null,onCloseBtnClick:null,containerClass:""},p={wrapper:'<div class="free-dialog-wrapper v-center free-modal" />',container:'<div class="free-dialog-container" />',close:'<button class="free-dialog-close"><span class="close-x"></span></button>',header:'<div class="free-dialog-header" />',content:'<div class="free-dialog-content" />',footer:'<div class="free-dialog-footer" />'},u={};$.extend(!0,window,{free:{dialog:function(t){return u=$.extend({},f,t),e(),a.show(),a.close=i,a}}})}(),function(){function e(e,t){var n=e.offset(),o=e.outerWidth();e.outerHeight();return{top:n.top-(t.outerHeight()+i),left:n.left-(t.outerWidth()-o)/2}}function t(e,t){var n=e.offset(),o=e.outerWidth(),a=e.outerHeight();return{top:n.top-(t.outerHeight()-a)/2,left:n.left+o+i}}function n(e,t){var n=e.offset(),o=(e.outerWidth(),e.outerHeight());return{top:n.top-(t.outerHeight()-o)/2,left:n.left-t.outerWidth()-i}}function o(e,t){var n=e.offset(),o=e.outerWidth(),a=e.outerHeight();return{top:n.top+a+i,left:n.left-(t.outerWidth()-o)/2}}var i=8,a={warpper:'<div class="free-popbox-wrapper"/>',container:'<div class="free-popbox-box"/>',content:'<div class="free-popbox-content"/>',anchor:'<div class="free-popbox-anchor"/>'},c={position:"top",content:"",onClose:null},s={top:e,right:t,left:n,bottom:o},s={top:e,right:t,left:n,bottom:o};$.fn.popbox=function(e){function t(){"function"==typeof n.onClose&&n.onClose(f),i.remove()}var n=$.extend({},c,e),o=$(this),i=$(a.warpper),r=$(a.container),l=$(a.content),d=$(a.anchor);r.append(l.html(n.content)).append(d),i.append(r).appendTo("body"),r.css(s[n.position](o,l)),l.addClass(n.position),d.addClass(n.position),setTimeout(function(){$("body").one("click",function(e){t()})},0),r.on("click",function(){return!1});var f={close:t,repin:function(){r.css(s[n.position](o,l))}};return"function"==typeof n.onShow&&n.onShow(f),f}}(),function(e){function t(e,t){var n,o,i=[],a=0;e.selectable&&i.push('<th class="free-table-selector"><input type="checkbox"/></th>');for(var c,s={},r=0,l=t.length;r<l;r++){if(null==(n=t[r]).id)throw"Each column must have an unique id";s[n.id]=n,o=n.width,c="",n.hide&&(c+="hide"),o?i.push('<th class="'+c+'" x-id='+n.id+' width="'+o+'px">'+n.name+"</th>"):i.push('<th class="'+c+'" x-id='+n.id+">"+n.name+"</th>"),a+=o||d}return e.selectable&&(a+=f),e.$tableBox.css("width",a+"px"),e.info&&e.$infoBox.css("width",a+"px"),e.colMap=s,i.join("")}function n(t,n,o){var i=[];o.selectable&&i.push('<td class="free-table-selector"><input type="checkbox"/></td>');for(var a,c,s,r,l=0,d=t.length;l<d;l++)(c=t[l]).id,s=c.formatter,text="function"==typeof s?s(n)+"":n[c.id]||"",a=c.escape?e("<i/>").text(text).html():text,r=c.hide?"hide":"",c.cssClass&&(r+=" "+c.cssClass),a=r?"<td class="+r+">"+a+"</td>":"<td>"+a+"</td>",i.push(a);return"<tr>"+i.join("")+"</tr>"}function o(e,t,o){for(var i=[],a=0,c=t.length;a<c;a++)i.push(n(e,t[a],o));return i}function i(e,t){e.$pageBox.twbsPagination("destroy"),e.$pageBox.twbsPagination({totalPages:Math.ceil(t/l),visiblePages:7,hideOnlyOnePage:!0,initiateStartPageClick:!1,onPageClick:function(t,n){c(e,!1,n-1)}}).show()}function a(t,n){var i=t.$tableBox.find("tbody");i.empty(),n.length>0?(i.append(o(t.columns,n,t)),i.find("tr").each(function(t){e(this).data("item",n[t])})):t.$pageBox.hide()}function c(e,t,n){var o=e.url,c=e.params,r=e.prepare,d=e.pagination;c=c||{},n=n||0,c.page=n,free.doGet(o,c,function(o){r&&(o=r(o));var c,f;Array.isArray(o)?(c=o.length,f=o):(c=o.total,f=o.items),a(e,f),e.info&&s(e,n+1,Math.ceil(c/l),c),!d||c<=l?e.$pageBox.hide():t&&i(e,c),e.onLoad(f)})}function s(e,t,n,o){e.pagination&&(e.$infoBox.find("span.page-num").text(t),e.$infoBox.find("span.page-sum").text(n)),e.$infoBox.find("span.sum").text(o)}function r(t,n){var o=n.$tableBox;n.selectable&&(o.find("th.free-table-selector > input").on("change",function(){var t=e(this).prop("checked");o.find("tbody td.free-table-selector > input").prop("checked",t),t?o.find("tbody tr").addClass("selected"):o.find("tbody tr").removeClass("selected")}),o.on("change","td.free-table-selector > input",function(){e(this).parents("tr").toggleClass("selected");var t=o.find("tbody tr:not(.selected)");o.find("th.free-table-selector input").prop("checked",0===t.length),"function"==typeof n.onSelectChange&&n.onSelectChange()}),o.on("click",".free-table-selector",function(t){if(!e(t.target).is("input")){var n=e(this).find("input");n.prop("checked",!n.prop("checked")).change()}})),o.find("thead").on("contextmenu",function(o){o.preventDefault(),t.find(".header-menu").remove();var i=e('<div class="header-menu"></div>');i.appendTo(t);var a=o.pageX,c=o.pageY;i.css({top:c,left:a});for(var s=n.columns,r=[],l=0;l<s.length;l++)r.push('<div class="item" x-id="'+s[l].id+'"><input type="checkbox"'+(s[l].hide?"":"checked")+'/><span class="name">'+s[l].name+"</span></div>");i.append(r.join("")),i.on("click",".item",function(t){if(!e(t.target).is("input")){var n=e(this).find("input");n.prop("checked",!n.prop("checked")).change()}}),i.on("click",function(e){e.stopPropagation()}),e("body").one("click",function(e){i.remove()}),i.on("change",".item > input",function(o){var i=e(this).parent().attr("x-id"),a=t.find("thead th[x-id="+i+"]");n.colMap[i].hide=!e(this).prop("checked");var c=a.index()+1,s=e("tbody > tr > td:nth-child("+c+")");a.toggleClass("hide"),s.toggleClass("hide")})})}var l=30,d=80,f=35,p={pagination:!1,columns:[],url:"",params:null,data:[],info:!0,selectable:!1,onLoad:function(){}};e.fn.table=function(o){var i=this,l=e('<div class="info-box"><span class="page-info">第&nbsp;<span class="page-num">1</span>&nbsp;页，共&nbsp;<span class="page-sum"></span>&nbsp;页，</span>总共&nbsp;<span class="sum"></span>&nbsp;条数据</div>'),f=e('<div class="table-box"><table><thead></thead><tbody></tbody></table></div>'),u=e('<div class="page-box"></div>'),h=o.data;delete o.data;var b=e.extend(!0,{$infoBox:l,$tableBox:f,$pageBox:u},p,o);return h&&(b.data=h,o.data=h),i.addClass("free-table-container"),b.info&&i.append(l),i.append(f),b.pagination?i.append(u):l.find(".page-info").hide(),f.css("min-width",b.columns.length*d+"px"),f.find("thead").append(t(b,b.columns)),b.url?c(b,!0):b.data&&(a(b,b.data),b.info&&s(b,1,1,b.data.length)),r(i,b),{refresh:function(){c(b,!0)},setColumns:function(n){b.columns=e.extend([],n),f.find("thead").empty().append(t(b,n))},setData:function(e){a(b,e)},insert:function(e,t){var o=f.find("tbody tr:eq("+t+")"),i=n(b.columns,e);0===o.length?f.find("tbody").append(i):o.before(i)},remove:function(e){f.find("tbody tr:eq("+e+")").remove()},setParams:function(e){b.params=e,c(b,!0)},getSelected:function(){var t=f.find("tr.selected"),n=[];return t.each(function(t,o){n.push(e(o).data("item"))}),{rows:t,items:n}},isSelected:function(e){return f.find("tr:eq("+e+")").hasClass("selected")}}}}(jQuery),function(){function e(){o=$(c.container).appendTo("body")}function t(t){o||e();var n=$(c.box).addClass(t.type);$(c.icon).addClass(t.type).appendTo(n),$(c.title).text(t.title).appendTo(n),$(c.content).text(t.message).appendTo(n),$(c.close).appendTo(n).on("click",function(){n.remove()}),n.appendTo(o),setTimeout(function(){n.remove()},t.duration)}function n(e,t){var n={title:i[e]||i.info,message:t[0]||"",duration:a,type:e};return 2===t.length&&("number"==typeof t[1]?n.duration=parseInt(t[1]):n.title=t[1]||n.title),3===t.length&&(n.title=t[1]||n.title,n.duration=parseInt(t[2])||a),n}var o,i={success:"成功",error:"错误",info:"提示",warn:"警告"},a=4e3,c={container:'<div class="free-noty-container"/>',icon:'<span class="free-noty-icon success"></span>',box:'<div class="free-noty-box"/>',title:'<div class="free-noty-title"/>',content:'<div class="free-noty-content"/>',close:'<span class="free-noty-close"></span>'};$.extend(!0,window,{free:{noty:{success:function(e,o,i){t(n("success",arguments))},info:function(e,o,i){t(n("info",arguments))},error:function(e,o,i){t(n("error",arguments))},warn:function(e,o,i){t(n("warn",arguments))}}}})}();