!function(){var n={title:'<div class="free-confirm-title"><i class="icon"></i></div>',content:'<div class="free-confirm-content" />',buttons:'<div class="free-confirm-btns"><button class="free-confirm-cancel">取消</button><button class="free-confirm-ok">确定</button></div>'},t={title:"提示",content:"您确定这样做吗？",ok:null,cancel:null};$.extend(!0,window,{free:{confirm:function(e){var o=$.extend({},t,e),i=$(n.buttons),a=free.dialog({title:$(n.title).append(o.title),content:$(n.content).append(o.content),footer:i,escClose:!1,blankClose:!1,containerClass:"free-confirm-box",onCloseBtnClick:function(){"function"==typeof o.cancel&&o.cancel()}});"function"==typeof o.ok&&i.find("button.free-confirm-ok").one("click",function(){a.close(),o.ok()}),"function"==typeof o.cancel&&i.find("button.free-confirm-cancel").one("click",function(){a.close(),o.cancel()})}}})}(),function(){function n(){a=$(d.wrapper),s=$(d.container),c=$(d.close),r=$(d.header).html(u.title),l=$(d.content).html(u.content),f=$(d.footer),l.css("max-height",$(window).height()-200),s.append(c).append(r).append(l).appendTo(a),u.footer&&s.append(f.append(u.footer)),a.appendTo("body"),u.containerClass&&s.addClass(u.containerClass),e()}function t(n){27===n.which&&i()}function e(){c.on("click",function(){"function"==typeof u.onCloseBtnClick&&u.onCloseBtnClick(),i()}),u.escClose&&$("body").on("keydown",t),u.blankClose&&a.on("click",function(n){$(n.target).is(".free-dialog-wrapper")&&i()})}function o(){u.escClose&&$("body").off("keydown",t)}function i(){"function"==typeof u.onClose&&u.onClose(),o(),a.remove()}var a,s,c,r,l,f,p={title:"",content:"",footer:"",blankClose:!1,escClose:!0,onClose:null,onCloseBtnClick:null,containerClass:""},d={wrapper:'<div class="free-dialog-wrapper v-center free-modal" />',container:'<div class="free-dialog-container" />',close:'<button class="free-dialog-close"><span class="close-x"></span></button>',header:'<div class="free-dialog-header" />',content:'<div class="free-dialog-content" />',footer:'<div class="free-dialog-footer" />'},u={};$.extend(!0,window,{free:{dialog:function(t){return u=$.extend({},p,t),n(),a.show(),a.close=i,a}}})}(),function(){function n(n,t){var e=n.offset(),o=n.outerWidth();n.outerHeight();return{top:e.top-(t.outerHeight()+i),left:e.left-(t.outerWidth()-o)/2}}function t(n,t){var e=n.offset(),o=n.outerWidth(),a=n.outerHeight();return{top:e.top-(t.outerHeight()-a)/2,left:e.left+o+i}}function e(n,t){var e=n.offset(),o=(n.outerWidth(),n.outerHeight());return{top:e.top-(t.outerHeight()-o)/2,left:e.left-t.outerWidth()-i}}function o(n,t){var e=n.offset(),o=n.outerWidth(),a=n.outerHeight();return{top:e.top+a+i,left:e.left-(t.outerWidth()-o)/2}}var i=8,a={warpper:'<div class="free-popbox-wrapper"/>',container:'<div class="free-popbox-box"/>',content:'<div class="free-popbox-content"/>',anchor:'<div class="free-popbox-anchor"/>'},s={position:"top",content:"",onClose:null},c={top:n,right:t,left:e,bottom:o},c={top:n,right:t,left:e,bottom:o};$.fn.popbox=function(n){function t(){"function"==typeof e.onClose&&e.onClose(p),i.remove()}var e=$.extend({},s,n),o=$(this),i=$(a.warpper),r=$(a.container),l=$(a.content),f=$(a.anchor);r.append(l.html(e.content)).append(f),i.append(r).appendTo("body"),r.css(c[e.position](o,l)),l.addClass(e.position),f.addClass(e.position),setTimeout(function(){$("body").one("click",function(n){t()})},0),r.on("click",function(){return!1});var p={close:t,repin:function(){r.css(c[e.position](o,l))}};return"function"==typeof e.onShow&&e.onShow(p),p}}(),function(n){function t(n,t){for(var e,o,i=[],a=0,s=0,c=t.length;s<c;s++)(o=(e=t[s]).width)?i.push('<th width="'+o+'px">'+e.name+"</th>"):i.push("<th>"+e.name+"</th>"),a+=o||100;return n.$tableBox.css("width",a+"px"),n.$infoBox.css("width",a+"px"),i.join("")}function e(t,e){for(var o,i,a=n("<tr></tr>"),s=0,c=t.length;s<c;s++){if(o=t[s].key,i=n('<td x-index="'+s+'"></td>'),n.isFunction(o)){var r=o(e)+"";r.startsWith("<td")&&r.endsWith("</td>")?i=n(r):i.text(r)}else"string"==typeof o&&i.text(e[o]);a.append(i)}return a}function o(n,t){for(var o=[],i=0,a=t.length;i<a;i++)o.push(e(n,t[i]));return o}function i(n,t){n.$pageBox.twbsPagination("destroy"),n.$pageBox.twbsPagination({totalPages:Math.ceil(t/r),visiblePages:7,hideOnlyOnePage:!0,initiateStartPageClick:!1,onPageClick:function(t,e){s(n,!1,e-1)}}).show()}function a(t,e){var i=t.$tableBox.find("tbody");i.empty(),e.length>0?(i.append(o(t.columns,e)),i.find("tr").each(function(t){n(this).data("item",e[t])})):t.$pageBox.hide()}function s(n,t,e){var o=n.url,s=n.params,l=n.prepare,f=n.pagination;s=s||{},e=e||0,s.page=e,free.doGet(o,s,function(o){l&&(o=l(o));var s,p;Array.isArray(o)?(s=o.length,p=o):(s=o.total,p=o.items),a(n,p),c(n,e+1,Math.ceil(s/r),s),!f||s<=r?n.$pageBox.hide():t&&i(n,s),n.onLoad(p)})}function c(n,t,e,o){n.pagination&&(n.$infoBox.find("span.page-num").text(t),n.$infoBox.find("span.page-sum").text(e)),n.$infoBox.find("span.sum").text(o)}var r=30;n.fn.table=function(o){var i=this,r=n('<div class="info-box"><span class="page-info">第&nbsp;<span class="page-num">1</span>&nbsp;页，共&nbsp;<span class="page-sum"></span>&nbsp;页，</span>总共&nbsp;<span class="sum"></span>&nbsp;条数据</div>'),l=n('<div class="table-box"><table><thead></thead><tbody></tbody></table></div>'),f=n('<div class="page-box"></div>'),p={pagination:!1,columns:[],url:"",params:null,data:[],$infoBox:r,$tableBox:l,$pageBox:f,onLoad:function(){}};return n.extend(!0,p,o),o.data&&(p.data=o.data),i.addClass("free-table-container").append(r).append(l),p.pagination?i.append(f):r.find(".page-info").hide(),l.css("min-width",100*p.columns.length+"px"),l.find("thead").append(t(p,p.columns)),p.url?s(p,!0):p.data&&(a(p,p.data),c(p,1,1,p.data.length)),{refresh:function(){s(p,!0)},setColumns:function(e){p.columns=n.extend([],e),l.find("thead").empty().append(t(p,e))},setData:function(n){a(p,n)},insert:function(n,t){var o=l.find("tbody tr:eq("+t+")"),i=e(p.columns,n);0===o.length?l.find("tbody").append(i):o.before(i)},remove:function(n){l.find("tbody tr:eq("+n+")").remove()},setParams:function(n){p.params=n,s(p,!0)}}}}(jQuery),function(){function n(){o=$(s.container).appendTo("body")}function t(t){o||n();var e=$(s.box).addClass(t.type);$(s.icon).addClass(t.type).appendTo(e),$(s.title).text(t.title).appendTo(e),$(s.content).text(t.message).appendTo(e),$(s.close).appendTo(e).on("click",function(){e.remove()}),e.appendTo(o),setTimeout(function(){e.remove()},t.duration)}function e(n,t){var e={title:i[n]||i.info,message:t[0]||"",duration:a,type:n};return 2===t.length&&("number"==typeof t[1]?e.duration=parseInt(t[1]):e.title=t[1]||""),3===t.length&&(e.title=t[1]||"",e.duration=parseInt(t[2])||a),e}var o,i={success:"成功",error:"错误",info:"提示",warn:"警告"},a=4e3,s={container:'<div class="free-noty-container"/>',icon:'<span class="free-noty-icon success"></span>',box:'<div class="free-noty-box"/>',title:'<div class="free-noty-title"/>',content:'<div class="free-noty-content"/>',close:'<span class="free-noty-close"></span>'};$.extend(!0,window,{free:{noty:{success:function(n,o,i){t(e("success",arguments))},info:function(n,o,i){t(e("info",arguments))},error:function(n,o,i){t(e("error",arguments))},warn:function(n,o,i){t(e("warn",arguments))}}}})}();